(()=>{function m(t,n=[],e={}){let o="http://www.w3.org/2000/svg",r=document.createElementNS(o,t);n.forEach(c=>{r.classList.add(c)});for(let[c,a]of Object.entries(e))r.setAttribute(c,a);return r}function x(t,n){let e=`M${n[0][0]},${n[0][1]}`+n.slice(1).map(a=>`L${a[0]},${a[1]}`).join(" "),c=m("path",["level"],{d:e,fill:"none",stroke:"black","stroke-width":1});t.appendChild(c)}function f({intercept:t,slope:n}){return function(e){return n*e+t}}function g(t,n){let e=t.slope,o=n.slope;return e===o?k():Number.isFinite(e)&&Number.isFinite(o)?C(t,n):!Number.isFinite(e)&&o===0||!Number.isFinite(o)&&e===0?N(t,n):B(t,n)}function k(){return null}function C(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept,a=1/(e-r);return[a*(c-o),a*(e*c-o*r)]}function B(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept;if(!Number.isFinite(e)){let i=f({slope:r,intercept:c})(t.x);return[(i-c)/r,i]}let u=f({slope:e,intercept:o})(n.x);return[(u-o)/e,u]}function N(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept;return!Number.isFinite(r)&&e===0?[n.x,o]:!Number.isFinite(e)&&r===0?[t.x,c]:null}function y(t,n){let[e,o]=t,[r,c]=n;return e===r?c<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:(o*r-c*e)/(r-e)}function w(t,n){let[e,o]=t,[r,c]=n;return e===r?c<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:o===c?0:(c-o)/(r-e)}function d(t,n){let e=w(t,n),o=y(t,n);return Number.isFinite(e)?{intercept:o,slope:e}:{intercept:o,slope:e,x:t[0]}}function E(t,n,e,o){let r=M(e,o,n),c=`M${r[0][0]},${r[0][1]}`+r.slice(1).map(i=>`L${i[0]},${i[1]}`).join(" "),l=m("path",["light"],{d:c,fill:"none",stroke:"orange","stroke-width":1}),s=l.getTotalLength();l.style.strokeDasharray=`${s} ${s}`,l.style.strokeDashoffset=s,l.getBoundingClientRect(),l.style.transition="stroke-dashoffset 1s linear",t.appendChild(l),setTimeout(()=>l.style.strokeDashoffset="0",500)}function M(t,n,e){let o=[t],r=v(t),c=v(t.map((s,i)=>s+n[i])),a=[];for(let s=0;s<e.length-1;s++){let i=v(e[s]),p=v(e[s+1]),$=d(i,p);a.push({start:[...e[s]],end:[...e[s+1]],length:L(e[s],e[s+1]),...$})}let u=d(r,c),l=a.map((s,i)=>{let p=g({intercept:s.intercept,slope:s.slope},u);return{...s,crosspoint:p,distance:L(p,r),index:i,within:{x:r[0]>=s.start[0]&&r[0]<=s.end[0],y:r[1]>=s.start[1]&&r[1]<=s.end[1]}}}).filter(s=>s.within.x||s.within.y);return l.length===0?S():(o.push(j(l.reduce((s,i)=>s.distance<i.distance?s:i).crosspoint)),o)}function v(t){let[n,e]=t;return[n,100-e]}function j(t){let[n,e]=t;return[n,100-e]}function L(t,n){if(!t||!n)return null;let[e,o]=t,[r,c]=n;return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(c-o),2))}function S(){alert("You lost")}var h=[{name:"Level I",start:[50,91],end:[[45,11],[55,11]],shape:[[49,90],[40,90],[40,10],[60,10],[60,90],[51,90]]},{name:"Level O",start:[45,91],end:[[52,91],[58,91]],shape:[[44,90],[40,90],[35,88],[30,85],[25,80],[20,70],[15,60],[15,40],[20,30],[25,20],[30,15],[35,12],[40,10],[60,10],[65,12],[70,15],[75,20],[80,30],[85,40],[85,60],[80,70],[75,80],[70,85],[60,90],[51,90],[51,70],[60,70],[70,60],[70,40],[60,30],[40,30],[30,40],[30,60],[40,70],[49,70],[49,90],[46,90]]},{name:"Level M",start:[15,91],end:[[82,89],[88,89]],shape:[[14,90],[10,90],[10,20],[20,10],[30,10],[45,70],[55,70],[70,10],[80,10],[90,20],[90,90],[80,90],[80,24],[60,90],[40,90],[20,24],[20,90],[16,90]]},{name:"Level R",start:[15,91],end:[[82,89],[88,89]],shape:[[14,90],[10,90],[30,40],[25,38],[20,35],[15,30],[15,20],[20,15],[25,12],[30,10],[49,10],[50,12],[51,10],[70,10],[75,12],[80,15],[85,20],[85,30],[80,35],[75,38],[70,40],[90,90],[80,90],[60,40],[60,90],[51,90],[51,30],[70,30],[75,25],[70,20],[30,20],[25,25],[30,30],[49,30],[49,90],[40,90],[40,40],[20,90],[16,90]]}];var I=0;O(h.map(t=>t.name));R();b(h[I].name);function O(t){let n=document.getElementById("levels");t.forEach(e=>{let o=document.createElement("li");o.textContent=e,n.appendChild(o)})}function R(){let t=document.getElementById("form"),n=document.getElementById("levels");t.addEventListener("submit",e=>W(e)),n.addEventListener("click",e=>V(e))}function V(t){let{currentTarget:n,target:e}=t;I=Array.from(n.children).findIndex(o=>o===e),b(e.textContent)}function W(t){t.preventDefault();let n=document.getElementById("root");F();let{shape:e,start:o}=h[I];E(n,e,o,Y()),q(),T()}function b(t){let n=document.getElementById("root"),e=h.find(o=>o.name===t).shape;z(),D(),U(),F(),x(n,e),T()}function z(){let t=document.getElementById("angle");t.value=0}function D(){let t=document.getElementById("attempt");t.value=0}function U(){let t=document.querySelector(".level");t&&t.remove()}function F(){let t=document.querySelector(".light");t&&t.remove()}function Y(){let t=document.getElementById("angle"),n=_(parseInt(t.value,10)-90);return G({r:1,degree:n})}function _(t){return t*Math.PI/180}function G(t){let{r:n,degree:e}=t,o=parseFloat((Math.cos(e)/n).toFixed(2)),r=parseFloat((Math.sin(e)/n).toFixed(2));return[o,r]}function T(){let t=document.getElementById("root"),n=document.querySelector('link[rel="icon"]'),o=new XMLSerializer().serializeToString(t).replace(/ id="\w+"/g,"").replace(/ style=".*"/g,"").replace(/ class="\w+"/g,"");n.href="data:image/svg+xml;utf8,"+o}function q(){let t=document.getElementById("share-me"),n=document.getElementById("attempt"),e=parseInt(n.value,10)!==1?"":"s",o=`${n.value} attempt${e}`,r=I+1,c=encodeURIComponent(['I played "I Really Move On".',`I completed level ${r} after ${o}!`,"What is your highscore?",""].join(`
`)),{hostname:a,pathname:u,protocol:l}=location,i=`https://twitter.com/intent/tweet?url=${encodeURIComponent(`${l}//${a}${u}`)}&hashtags=gamedevjs&via=AndreJaenisch&text=${c}`;t.href=i}})();
//# sourceMappingURL=app.js.map
