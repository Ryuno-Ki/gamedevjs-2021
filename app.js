(()=>{function f(t,n=[],e={}){let o="http://www.w3.org/2000/svg",r=document.createElementNS(o,t);n.forEach(c=>{r.classList.add(c)});for(let[c,i]of Object.entries(e))r.setAttribute(c,i);return r}function x(t,n){let e=`M${n[0][0]},${n[0][1]}`+n.slice(1).map(i=>`L${i[0]},${i[1]}`).join(" "),c=f("path",["level"],{d:e,fill:"none",stroke:"black","stroke-width":1});t.appendChild(c)}function m({intercept:t,slope:n}){return function(e){return n*e+t}}function h(t,n){let e=t.slope,o=n.slope;return e===o?k():Number.isFinite(e)&&Number.isFinite(o)?L(t,n):!Number.isFinite(e)&&o===0||!Number.isFinite(o)&&e===0?b(t,n):M(t,n)}function k(){return null}function L(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept,i=1/(e-r);return[i*(c-o),i*(e*c-o*r)]}function M(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept;if(!Number.isFinite(e)){let u=m({slope:r,intercept:c})(t.x);return[(u-c)/r,u]}let p=m({slope:e,intercept:o})(n.x);return[(p-o)/e,p]}function b(t,n){let e=t.slope,o=t.intercept,r=n.slope,c=n.intercept;return!Number.isFinite(r)&&e===0?[n.x,o]:!Number.isFinite(e)&&r===0?[t.x,c]:null}function I(t,n){let[e,o]=t,[r,c]=n;return e===r?c<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:(o*r-c*e)/(r-e)}function y(t,n){let[e,o]=t,[r,c]=n;return e===r?c<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:o===c?0:(c-o)/(r-e)}function d(t,n){let e=y(t,n),o=I(t,n);return Number.isFinite(e)?{intercept:o,slope:e}:{intercept:o,slope:e,x:t[0]}}function v(t,n,e,o){let r=S(e,o,n),c=`M${r[0][0]},${r[0][1]}`+r.slice(1).map(u=>`L${u[0]},${u[1]}`).join(" "),a=f("path",["light"],{d:c,fill:"none",stroke:"orange","stroke-width":1}),s=a.getTotalLength();a.style.strokeDasharray=`${s} ${s}`,a.style.strokeDashoffset=s,a.getBoundingClientRect(),a.style.transition="stroke-dashoffset 1s linear",t.appendChild(a),setTimeout(()=>a.style.strokeDashoffset="0",500)}function S(t,n,e){let o=[t],r=g(t),c=g(t.map((s,u)=>s+n[u])),i=[];for(let s=0;s<e.length-1;s++){let u=g(e[s]),l=g(e[s+1]),E=d(u,l);i.push({start:[...e[s]],end:[...e[s+1]],length:w(e[s],e[s+1]),...E})}let p=d(r,c),a=i.map((s,u)=>{let l=h({intercept:s.intercept,slope:s.slope},p);return{...s,crosspoint:l,distance:w(l,r),index:u,within:{x:r[0]>=s.start[0]&&r[0]<=s.end[0],y:r[1]>=s.start[1]&&r[1]<=s.end[1]}}}).filter(s=>s.within.x||s.within.y);return a.length===0?$():(o.push(j(a.reduce((s,u)=>s.distance<u.distance?s:u).crosspoint)),o)}function g(t){let[n,e]=t;return[n,100-e]}function j(t){let[n,e]=t;return[n,100-e]}function w(t,n){if(!t||!n)return null;let[e,o]=t,[r,c]=n;return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(c-o),2))}function $(){alert("You lost")}var F=[{shape:[[49,90],[40,90],[40,10],[60,10],[60,90],[51,90]]},{shape:[[14,90],[10,90],[10,20],[20,10],[30,10],[45,70],[55,70],[70,10],[80,10],[90,20],[90,90],[80,90],[80,24],[60,90],[40,90],[20,24],[20,90],[16,90]]}];var N=document.getElementById("root");var T=F[0].shape;B(N,T);x(N,T);A(N);function B(t,n){document.getElementById("form").addEventListener("submit",o=>O(o,t,n))}function O(t,n,e){t.preventDefault(),V();let o=document.getElementById("attempt");o.value=parseInt(o.value,10)+1;let r=document.getElementById("angle"),c=Y(parseInt(r.value,10)-90),i=z({r:1,degree:c});v(n,e,[50,91],i)}function V(){let t=document.querySelector(".light");t&&t.remove()}function Y(t){return t*Math.PI/180}function z(t){let{r:n,degree:e}=t,o=parseFloat((Math.cos(e)/n).toFixed(2)),r=parseFloat((Math.sin(e)/n).toFixed(2));return[o,r]}function A(t){let n=document.querySelector('link[rel="icon"]'),o=new XMLSerializer().serializeToString(t);n.href="data:image/svg+xml;utf8,"+o}})();
//# sourceMappingURL=app.js.map
