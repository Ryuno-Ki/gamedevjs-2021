(()=>{function f(t,n=[],e={}){let o="http://www.w3.org/2000/svg",r=document.createElementNS(o,t);n.forEach(s=>{r.classList.add(s)});for(let[s,i]of Object.entries(e))r.setAttribute(s,i);return r}function x(t,n){let e=`M${n[0][0]},${n[0][1]}`+n.slice(1).map(i=>`L${i[0]},${i[1]}`).join(" "),s=f("path",["level"],{d:e,fill:"none",stroke:"black","stroke-width":1});t.appendChild(s)}function m({intercept:t,slope:n}){return function(e){return n*e+t}}function h(t,n){let e=t.slope,o=n.slope;return e===o?E():Number.isFinite(e)&&Number.isFinite(o)?L(t,n):!Number.isFinite(e)&&o===0||!Number.isFinite(o)&&e===0?w(t,n):k(t,n)}function E(){return null}function L(t,n){let e=t.slope,o=t.intercept,r=n.slope,s=n.intercept,i=1/(e-r);return[i*(s-o),i*(e*s-o*r)]}function k(t,n){let e=t.slope,o=t.intercept,r=n.slope,s=n.intercept;if(!Number.isFinite(e)){let u=m({slope:r,intercept:s})(t.x);return[(u-s)/r,u]}let l=m({slope:e,intercept:o})(n.x);return[(l-o)/e,l]}function w(t,n){let e=t.slope,o=t.intercept,r=n.slope,s=n.intercept;return!Number.isFinite(r)&&e===0?[n.x,o]:!Number.isFinite(e)&&r===0?[t.x,s]:null}function I(t,n){let[e,o]=t,[r,s]=n;return e===r?s<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:(o*r-s*e)/(r-e)}function v(t,n){let[e,o]=t,[r,s]=n;return e===r?s<o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:o===s?0:(s-o)/(r-e)}function d(t,n){let e=v(t,n),o=I(t,n);return Number.isFinite(e)?{intercept:o,slope:e}:{intercept:o,slope:e,x:t[0]}}function y(t,n,e,o){let r=M(e,o,n),s=`M${r[0][0]},${r[0][1]}`+r.slice(1).map(u=>`L${u[0]},${u[1]}`).join(" "),a=f("path",["light"],{d:s,fill:"none",stroke:"orange","stroke-width":1}),c=a.getTotalLength();a.style.strokeDasharray=`${c} ${c}`,a.style.strokeDashoffset=c,a.getBoundingClientRect(),a.style.transition="stroke-dashoffset 1s linear",t.appendChild(a),setTimeout(()=>a.style.strokeDashoffset="0",500)}function M(t,n,e){let o=[t],r=g(t),s=g(t.map((c,u)=>c+n[u])),i=[];for(let c=0;c<e.length-1;c++){let u=g(e[c]),p=g(e[c+1]),T=d(u,p);i.push({start:[...e[c]],end:[...e[c+1]],length:b(e[c],e[c+1]),...T})}let l=d(r,s),a=i.map((c,u)=>{let p=h({intercept:c.intercept,slope:c.slope},l);return{...c,crosspoint:p,distance:b(p,r),index:u,within:{x:r[0]>=c.start[0]&&r[0]<=c.end[0],y:r[1]>=c.start[1]&&r[1]<=c.end[1]}}}).filter(c=>c.within.x||c.within.y);return a.length===0?C():(o.push(j(a.reduce((c,u)=>c.distance<u.distance?c:u).crosspoint)),o)}function g(t){let[n,e]=t;return[n,100-e]}function j(t){let[n,e]=t;return[n,100-e]}function b(t,n){if(!t||!n)return null;let[e,o]=t,[r,s]=n;return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(s-o),2))}function C(){alert("You lost")}var F=[{shape:[[49,90],[40,90],[40,10],[60,10],[60,90],[51,90]]},{shape:[[14,90],[10,90],[10,20],[20,10],[30,10],[45,70],[55,70],[70,10],[80,10],[90,20],[90,90],[80,90],[80,24],[60,90],[40,90],[20,24],[20,90],[16,90]]}];var N=document.getElementById("root");var $=F[0].shape;B(N,$);x(N,$);O(N);function B(t,n){document.getElementById("form").addEventListener("submit",o=>A(o,t,n))}function A(t,n,e){t.preventDefault(),R();let o=document.getElementById("attempt");o.value=parseInt(o.value,10)+1;let r=document.getElementById("angle"),s=V(parseInt(r.value,10)-90),i=W({r:1,degree:s});y(n,e,[50,91],i),Y()}function R(){let t=document.querySelector(".light");t&&t.remove()}function V(t){return t*Math.PI/180}function W(t){let{r:n,degree:e}=t,o=parseFloat((Math.cos(e)/n).toFixed(2)),r=parseFloat((Math.sin(e)/n).toFixed(2));return[o,r]}function O(t){let n=document.querySelector('link[rel="icon"]'),o=new XMLSerializer().serializeToString(t);n.href="data:image/svg+xml;utf8,"+o}function Y(){let t=document.getElementById("share-me"),n=document.getElementById("attempt"),e=parseInt(n.value,10)!==1?"":"s",o=`${n.value} attempt${e}`,s=encodeURIComponent(['I played "I Really Move On".',`I completed level ${1} after ${o}!`,"What is your highscore?",""].join(`
`)),{hostname:i,pathname:l,protocol:a}=location,u=`https://twitter.com/intent/tweet?url=${encodeURIComponent(`${a}//${i}${l}`)}&hashtags=gamedevjs&via=AndreJaenisch&text=${s}`;t.href=u}})();
//# sourceMappingURL=app.js.map
